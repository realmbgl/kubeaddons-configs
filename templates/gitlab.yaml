---
apiVersion: kubeaddons.mesosphere.io/v1alpha1
kind: Addon
metadata:
  name: gitlab
  namespace: kubeaddons
  labels:
    kubeaddons.mesosphere.io/name: gitlab
  annotations:
    appversion.kubeaddons.mesosphere.io/gitlab: "12.0"
spec:
  kubernetes:
    minSupportedVersion: v1.14.0
  cloudProvider:
    - name: aws
      enabled: true
    - name: docker
      enabled: false
    - name: none
      enabled: true
  chartReference:
    chart: gitlab/gitlab
    version: 2.0.3
    values: |
      ---
      certmanager-issuer:
        email: <ISSUER EMAIL>
        # Need to specify the image as a workaround for https://gitlab.com/charts/gitlab/issues/1272.
        image:
          repository: gcr.io/google_containers/hyperkube
          tag: v1.14.0
      global:
        hosts:
          gitlab:
            name: <GITLAB DOMAIN>
          minio:
            name: <MINIO DOMAIN>
          registry:
            name: <REGISTRY DOMAIN>
